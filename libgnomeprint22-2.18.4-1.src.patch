--- origsrc/libgnomeprint-2.18.4/configure.in	2008-02-12 13:42:49.000000000 -0600
+++ src/libgnomeprint-2.18.4/configure.in	2008-03-01 21:38:55.906250000 -0600
@@ -148,9 +148,15 @@
 dnl Checking for libm
 dnl =================================
 AC_CHECK_LIBM
-if test "x$LIBM" = "x"; then
-	AC_MSG_ERROR(You need -lm(mathematic library) for this version of libgnomeprint.)
-fi
+case "$host_os" in
+	beos* | cygwin* | pw32* | darwin*)
+		# These systems don't have libm, or don't need it
+		;;
+	*)
+		if test "x$LIBM" = "x"; then
+			AC_MSG_ERROR(You need -lm(mathematic library) for this version of libgnomeprint.)
+		fi ;;
+esac
 LDFLAGS="$LDFLAGS $LIBM"
 
 dnl =================================
@@ -341,7 +347,6 @@
 cygwin*)
     platform_win32=yes
     os_win32=no
-    AC_DEFINE(HAVE_GDI, 1, [Define to 1 if we are going to build the gdi (win32) driver])
     SOPREFIX=cyg
     SOEXT=.dll
     ;;
--- origsrc/libgnomeprint-2.18.4/libgnomeprint/Makefile.am	2007-04-23 11:57:54.000000000 -0500
+++ src/libgnomeprint-2.18.4/libgnomeprint/Makefile.am	2008-03-01 21:38:55.906250000 -0600
@@ -53,7 +53,7 @@
 	gnome-print-unit.c \
 	gnome-print-paper.c
 
-if PLATFORM_WIN32
+if OS_WIN32
     nox_sources += gnome-print-gdi.c gnome-print-gdi.h
     LIBGNOMEPRINT_LIBS += -lgdi32 -lwinspool
 endif
--- origsrc/libgnomeprint-2.18.4/libgnomeprint/modules/Makefile.am	2007-01-01 18:23:08.000000000 -0600
+++ src/libgnomeprint-2.18.4/libgnomeprint/modules/Makefile.am	2008-03-01 21:38:56.031250000 -0600
@@ -10,7 +10,7 @@
 PAPI_DIR=
 endif
 
-if PLATFORM_WIN32
+if OS_WIN32
 WIN32_DIR=win32
 else
 WIN32_DIR=
